<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <title>프로젝트 그린</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" type="text/css" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/css/menu.css" rel="stylesheet" />
        <!-- <link href="/css/styles.css" rel="stylesheet" /> -->
        <link href="/css/login.css" rel="stylesheet" />
    </head>
    <body>
        <!-- Navigation-->
        <nav id="menu" style="position: relative;">
            <div class="menu-item">
                <div class="menu-text">
                    <a href="index" style="font-weight: 400;">메인</a>
                </div>
                <div class="sub-menu double">
                    <div class="icon-box gb a" style="margin-left: 130px;">
                        <div class="icon"><i class="far fa-question-circle"></i></div>
                        <div class="text" >
                            <div class="title"><a class="navbar-brand"  onclick="location.href='../index'">메인</a> <i class="far fa-arrow-right"></i></div>
                            <div class="sub-text">저희는 환경보호를 위한 친환경 제품 사용을 장려하기 위해 만들었습니다!</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="menu-item highlight">
                <div class="menu-text">
                    <a class="navbar-brand"  onclick="location.href='../intro'">소개</a>
                </div>
                <div class="sub-menu double">
                  
                    <div class="icon-box gb c">
                        <div class="icon"><i class="far fa-school"></i></div>
                        <div class="text">
                            <div class="title">소개 <i class="far fa-arrow-right"></i></div>
                            <div class="sub-text">왜 만들었을까요?</div>
                        </div>
                    </div>
                    <div class="sub-menu-holder"></div>
                </div>
            </div>
          </div>
        </div>
      </div>
      <div class="menu-item highlight">
        <div class="menu-text">
          <a class="navbar-brand" onclick="location.href='../intro'">소개</a>
        </div>
        <div class="sub-menu double">
          <div class="icon-box gb c">
            <div class="icon"><i class="far fa-school"></i></div>
            <div class="text">
              <div class="title">소개 <i class="far fa-arrow-right"></i></div>
              <div class="sub-text">왜 만들었을까요?</div>
            </div>
          </div>
          <div class="sub-menu-holder"></div>
        </div>
      </div>
      <div class="menu-item highlight">
        <div class="menu-text">
          <a class="navbar-brand" onclick="location.href='../rank'">랭킹</a>
        </div>
        <div class="sub-menu triple">
          <div class="top-container gb c icon-box">
            <div class="icon big"><i class="far fa-book"></i></div>
            <div class="text">
              <div class="title">
                <a class="navbar-brand" onclick="location.href='../rank'"
                  >제품 소개</a
                >
              </div>
              <div class="sub-text">
                투표를 통해 가장 많이 사랑받은 제품을 소개해드리겠습니다!
              </div>
            </div>
          </div>
          <div class="box">
            <a href="/like.rank">좋아요!</a>
            <a href="/rank_map">구매처!</a>
          </div>
        </div>
      </div>
      <div class="menu-item">
        <div class="menu-text">
          <a class="dropbtn" onclick="location.href='/b_freetalk'">게시판</a>
        </div>
        <div class="sub-menu">
          <div class="icon-box">
            <div class="icon"><i class="far fa-satellite"></i></div>
            <div class="text">
              <div class="title">
                <a class="navbar-brand" onclick="location.href='/b_freetalk'"
                  >자유게시판</a
                >
                <i class="far fa-arrow-right"></i>
              </div>
              <div class="sub-text">아무 주제나 환영합니다!</div>
            </div>
        </nav>
        
        <div id="info-box">
            <div th:if="${sess_id == null}">
                <ul>
                    <!-- <li><a class="nav-link" onclick="location.href='login'">로그인</a></li> -->
                    <li><a class="nav-link" onclick="location.href='login'">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" style="color: white; font-size: 13px;">
                        로그인
                      </button></a>
                    </li>
                    <li><a class="nav-link" onclick="location.href='join'" style="margin-top: 5px;">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" style="color: white; font-size: 13px;">
                        회원가입
                      </button></a>
                    </li>
                    <!-- <li><a class="nav-link" onclick="location.href='join'">회원가입</a></li> -->
                </ul>
            </div>
          </div>
          <div class="icon-box">
            <div class="icon"><i class="fab fa-twitch"></i></div>
            <div class="text">
              <div class="title">
                <a class="navbar-brand" onclick="location.href='/b_mission'"
                  >미션게시판</a
                >
                <i class="far fa-arrow-right"></i>
              </div>
              <div class="sub-text">여러분께 미션을 드리죠.</div>
            </div>
          </div>
          <div class="sub-menu-holder"></div>
        </div>
<!-------------------------------------the end of menu ----------------------------------->
    
    <div class="wrapper fadeInDown" style="padding-top: 0x; padding-bottom: 600px;">
        <div id="formContent" >
          <!-- Tabs Titles -->
          <h2 class="active"> Sign In </h2>
          <h2 class="inactive underlineHover"><a href="join"> Sign Up</a> </h2>
      
          <!-- Icon -->
          <div class="fadeIn first">
            <img src="/assets/user_icon.png" id="icon" alt="User Icon" style="width: 8%;"/>
          </div>
      
          <!-- Login Form -->
          <form name="loginForm" > 
            <input type="text" id="id" class="fadeIn second" name="id" placeholder="ID">
            <input type="password" id="pass" class="fadeIn third" name="password" placeholder="PASSWORD">
            <input type="submit" id="login-submit" class="fadeIn fourth" value="Log In">
          </form>
      
          <!-- Remind Passowrd -->
          <div id="formFooter">
            <a class="underlineHover" href="#">Forgot Password?</a>
          </div>
      
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      window.onload = function () {
        document.querySelector("#login-submit").onclick = function () {
          var formData = new FormData();
          formData.append("id", document.loginForm.id.value);
          formData.append("password", document.loginForm.password.value);
          axios({
            method: "post",
            contentType: false,
            url: "/login/login",
            data: formData,
          })
            .then(function (response) {
              var result = response.data;
              console.log(result);
              if (result === "NOTEXIST") {
                var isOK = confirm(
                  "아이디가 존재하지 않습니다. 회원가입 하시겠습니까?"
                );
                if (isOK) {
                  document.location = "/join";
                  return false;
                } else {
                  document.location = "/login";
                  return false;
                }
              } else if (result === "SUCCESS") {
                alert("로그인 성공!");
                document.location = "/index";
                return false;
              } else if (result === "INCORRECT_PW") {
                alert("비밀번호 오류");
                document.location = "/login";
                return false;
              }
              document.location = "/login";
              return false;
            })
            .catch(function () {
              alert("실패");
            });
        };
      };
    </script>
  </body>
</html>
